@page "/addalbum"
@rendermode InteractiveServer
@inject NavigationManager NavigationManager

<PageTitle>New Album</PageTitle>

<h1>Add Album</h1>

<div id='maindiv'>
    <EditForm method='post' OnValidSubmit="AddNewAlbum" Model="albumdta" FormName="addnewalbum">
        <label for 'title'>Title: </label>
        <InputText id='title' @bind-Value="albumdta.AlbumTitle" />
        
        <label for 'artistid'>Artist : </label>
        <InputText id='artist' @bind-Value="albumdta.Artist" />

         <button type="submit" >Create</button>
    </EditForm>
</div>

<div>
    <a href="/albums">Back to List</a>
</div>


@code {
    public class AlbumDta{
        public string AlbumTitle;
        public string Artist;
        public string Genre;
        public int NumberTracks;
    }

    
    private AlbumDta albumdta = new AlbumDta()  ;

    private void CallInsert(){
        BlazorDBDemo.Albums? albumlisting;
        albumlisting=new BlazorDBDemo.Albums();
        albumlisting.InsertNewAlbum(albumdta.AlbumTitle, albumdta.Artist, "Rock");
    
    }


    private async Task AddNewAlbum() {
        await Task.Run(CallInsert);
        NavigationManager.NavigateTo("/albums");
    }

}
